<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
  <meta charset="UTF-8">
  <title>Store Web Application</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</head>
<script>
  function submitForm() {
    document.querySelector('form').submit();
  }

  document.addEventListener("DOMContentLoaded", function () {
    // Initialize Bootstrap modal
    var myModal = new bootstrap.Modal(document.getElementById('editConfirmationModal'));
  });
</script>

<body>
<div th:insert="~{fragments/header :: header}"></div>

<div class="container">
  <h1>Edit Product</h1>
<form th:object="${products}" action="#" th:action="@{/products/edit/{id}(id=${id},final='products.id')}" method="POST" enctype="multipart/form-data">
  <div class="mb-3">
    <label for="inputName">Name</label>
    <input id="inputName" type="text" class="form-control" name="name" th:value="${products.name}">
    <div id="error-msg" class="alert alert-danger"
         th:if="${nameError}">
      <span th:text="${nameError}"></span>
    </div>
  </div>
  <div class="mb-3">
    <label for="inputDetail">Detail</label>
    <input id="inputDetail" type="text" class="form-control" name="detail" th:value="${products.detail}">
<!--    <div id="error-msg" class="alert alert-danger"-->
<!--         th:if="${nameError}">-->
<!--      <span th:text="${nameError}"></span>-->
<!--    </div>-->
  </div>

  <div class="mb-3">
    <label for="inputCategory">Category</label>
    <select class="form-control" id="inputCategory" name="categoryId">
      <option th:each="category : ${categories}"
              th:value="${category.id}" th:text="${category.name}">
      </option>
    </select>
  </div>

  <div class="mb-3">
    <label for="inputPrice">Price</label>
    <input id="inputPrice" type="number" class="form-control" name="price" th:value="${products.price}" required>
  </div>
  <div class="mb-3">
    <label for="inputRequire">Require</label>
    <input id="inputRequire" type="number" class="form-control" name="requireProduct" th:value="${products.requireProduct}" required>
  </div>
  <div class="mb-3">
    <label for="inputStock">Stock</label>
    <input id="inputStock" type="number" class="form-control" name="stock" th:value="${products.stock}" required>
  </div>
<!--  <div class="mb-3">-->
<!--    <label for="inputUnit">Unit</label>-->
<!--    <select class="form-control" id="inputUnit" name="UnitId">-->
<!--      <option th:each="unit : ${units}"-->
<!--              th:value="${unit.id}" th:text="${unit.name}">-->
<!--      </option>-->
<!--    </select>-->
<!--  </div>-->

  <div class="mb-3">
    <label for="imageFile">Image</label>
    <img th:src="'data:image/jpeg;base64,' + ${products.imageFile}" alt="Image Description" style="width: 100px;height: 100px;">
    <input type="file" id="imageFile" name="imageFile" accept="image/*" th:value="${products.imageFile}">
  </div>

<!--  <input type="submit" value="Update Product">-->
  <input type="submit" value="Update Product" >
</form>
<!--  &lt;!&ndash; Add this code after your form &ndash;&gt;-->
<!--  <div class="modal fade" id="editConfirmationModal" tabindex="-1" aria-labelledby="editConfirmationModalLabel" aria-hidden="true">-->
<!--    <div class="modal-dialog modal-dialog-centered">-->
<!--      <div class="modal-content">-->
<!--        <div class="modal-header">-->
<!--          <h5 class="modal-title" id="editConfirmationModalLabel">Edit Confirmation</h5>-->
<!--          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
<!--        </div>-->
<!--        <div class="modal-body">-->
<!--          <p>Are you sure you want to save these changes?</p>-->
<!--        </div>-->
<!--        <div class="modal-footer">-->
<!--          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>-->
<!--          <button type="submit" class="btn btn-primary">Save Changes</button>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
</div>
</body>

</html>